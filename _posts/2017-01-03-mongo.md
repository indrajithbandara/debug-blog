---
layout: post
title:  "MongoDB!"
date:   2016-10-13 15:32:03 -0300
categories: start blog
---
## MongoDB

## Aula 1

###### NOSQL
Nos bancos relacionais o que importa são as respostas que voce tem, sabemos os dados que vao entrando, normalizando, separando todas
informacoes para nao ter duplicidade nas tabelas, só existe uma forma de modelar o relacional, normalizando, agora se vc for NoSQL
as perguntas que importam, o que o sistema quer no inicio dele

###### Terminologia
SQL RDBMS         MongoDB
DATABASE          DATABASE
TABLE             COLLECTION
ROWS              DOCUMENT JSON
QUERY             QUERY
INDEX             INDEX
PARTITION         SHARD

###### Vantagens
Normalmente as empresas utilizam os bancos NoSQL quando possuem um banco de dados em franco crescimento e precisam escalar horizontalmente com performance.

###### Tipos
Nesse universo de Banco de Dados NoSQL temos alguns grupos grandes com diversos bancos de dados e para as mais diversas finalidades, então vamos conhecer um pouco sobre eles para entender um pouco onde iremos nos enfiar. :p
Chave/Valor;
Documento;
Grafo;
Coluna.

##### Para iniciarmos o MongoDb precisamos rodar o seu serviço, executando o comando:
mongod

##### Caso seja sua primeira vez com o MongoDb e ter dado erro e você localizar isso na mensagem de erro:
data/db

##### Significa que sua pasta data/db não está criada, para criar em sistema unix e da as permissões necessárias use:
sudo mkdir /data
sudo mkdir /data/db
sudo chmod 777 -Rf /data'

###### Para conectarmos no servidor do MongoDb usaremos seu cliente, o:
mongo

###### Antes instale o Mongo Hacker para colocrir o console
https://github.com/TylerBrock/mongo-hacker

###### Para exportarmos os dados de uma coleção no MongoDb usaremos o comando: 
mongoexport

###### Chamamos o mongo export com  nome da database, nome da coleção a ser exportada, e  nome do arquivo Jason que vc quer salvar.
$ mongoxport --db nome_da_database --collection nome_da_colecao --out minha_colecao.json

##### mongoimport é mesma coisa, porem dessa vez temos o --drop que apaga sua colecao se ela existir e joga os dados em cima da colecao vazia,  e file eh o aquivo que tem os dados desse json
$ mongoimport --db database --collection collection --drop --file data.json

#### Exercicios
Importando os restaurantes

$ mongoimport --db be-mean --collection restaurantes --host=127.0.0.1 --drop --file restaurantes.json
connected to: 127.0.0.1
Sat Jan 14 10:56:50.019 dropping: be-mean.restaurantes
Sat Jan 14 10:56:51.211 check 9 25359
Sat Jan 14 10:56:51.524 imported 25359 objects

##### ============================================================================================================


## Aula 2

#### Utilizando databases
use nome_database

### Caso queria escolher uma database na hora de levantar o mongod basta executar
mongo nome_database

##### Então agora é sua hora de mudar seu banco de dados, vamos todos usar a mesma base:
use be-mean-instagram

##### Perceba que logo abaixo você receberá uma mensagem assim:
switched to db be-mean-instagram

###### Isso significa que agora nossa variável `db` está aprontando para nosso database, para você verificar basta digitar `db` e apertar o ENTER:Isso
$ db
be-mean-instagram


###### O comando show dbs lista as databases criadas, porém perceba como está a sua listagem após o comando, provavelmente parecida com isso:
show dbs
local  0.078GB

###### Isso acontece porque o MongoDb só irá criar sua database quando você tiver inserido algo nela, para inserirmos algo faremos da seguinte maneira:
db.teste.insert({nome: "Suissa", idade: 30})
Inserted 1 record(s) in 1854ms
WriteResult({
"nInserted": 1
})


#### Database

###### Para listarmos nossas databases precisamos apenas executar o seguinte comando no cliente do MongoDb:
show dbs

###### Agora vamos criar o nosso banco para iniciar o nosso Instagram, execute o seguinte comando:
use be-mean-instagram
switched to db be-mean-instagram

###### se quiser ver qual banco de dados estamos usando basta você executar db no cliente:
db
be-mean-instagram

##### dropDatabase
Para apagarmos um banco de dados é bem simples, basta execurtarmos a função dropDatabase() após termos definido nosso banco com use nome_do_banco:
$ use banco_a_remover
switched to db banco_a_remover









###### Par usaar uma database basta utilizar a palavra reservada "use" se ela nao existir o mongoDB vai criar
$ use_nome_database

###### Para saber o nome da database que estamos baasta digitar "db".
$ db
be-mean

##### Para listarmos nossa database usamos o show dbs, mas ele so cria uma nova database quando vc insere um valor novo
$ show dbs
-be-mean          → 0.203GB
be-mean           → 0.203GB










